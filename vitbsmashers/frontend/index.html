<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scholars Stack - Premium Academic Resources</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <meta name="google-signin-client_id" content="686446558105-bl2q9t63tcnei5u4ugck952tanccrpdu.apps.googleusercontent.com">
    <link rel="stylesheet" href="style.css">
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- Header -->
    <header id="mainHeader">
        <div class="container header-content">
            <a href ="index.html" class="logo" id="mainLogo">
                            <img src="features/images/logo1.png" alt="Scholars Stack Logo">

                <div class="logo-text">
                    <h1>Scholars <span>Stack</span></h1>
                    <p>Premium Academic Resources</p>
                </div>
            </a>
            
            <button class="mobile-toggle" id="mobileToggle" aria-label="Toggle navigation menu">
                <i class="fas fa-bars" id="menuIcon"></i>
            </button>
            
            <nav id="mainNav">
                <ul>
                    <li><a href="#why-join" class="nav-link">Why Join?</a></li>
                    <li><a href="#testimonials" class="nav-link">Testimonials</a></li>
                    <li><a href="features/marketplace/market.html?sidebar=active" class="nav-link">Resources</a></li>
                    <li><a href="features/marketplace/market.html?sidebar=active" class="nav-btn"><i class="fas fa-rocket"></i> Get Started</a></li>
                </ul>
            </nav>
        </div>
        
        <div class="nav-overlay" id="navOverlay"></div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <!-- Hero Text -->
                <div class="hero-text">
                    <h1>Transform Your Academic Performance at VIT Bhopal</h1>
                    <p>Access premium study materials from 9-pointer students, curated resources, and powerful tools designed to maximize your GPA and minimize your effort.</p>
                    
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-number">97 </div>
                            <div class="stat-label">% Success Rate</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">9+</div>
                            <div class="stat-label">Avg. GPA</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">500+</div>
                            <div class="stat-label">Students</div>
                        </div>
                    </div>
                    
                    <div class="hero-btns">
                        <div class="auth-section">
                            <div id="googleSignInContainer"></div>
                            <p class="auth-note vit-note">
                                <i class="fas fa-university"></i>
                                <span><strong>Exclusive for VIT Bhopal University students</strong><br>Please use your <strong>@vitbhopal.ac.in</strong> Google account to sign in</span>
                            </p>
                        </div>

                    </div>
                </div>
                
                <!-- Compact Feature Cards -->
<!-- Feature Cards Section -->
<section class="features-section">
    <div class="container">
        <div class="section-title">
            <h2>Features</h2>
            <p>Premium academic resources curated by top-performing students</p>
        </div>
        
        <div class="compact-features-grid">
            <!-- Feature Card 1 -->
             <a class="feature-card" href="features/maps/maps.html?sidebar=active">
                                <span class="upcoming-tag">Upcoming</span>

                <div class="feature-icon">
                    <i class="fas fa-map"></i>
                </div>
                <h3>Map</h3>
                <p>Map of Vit-bhopal with its looks</p>
                <div class="access-now">
                    <span>Access Now</span>
                    <i class="fas fa-arrow-right"></i>
                </div>
            </a>
            
            
             <a class="feature-card" href="features/ttmaker/ttmaker1.html?sidebar=active">
                 <div class="feature-icon">
                     <i class="fas fa-calendar-alt"></i>
                 </div>
                 <h3>Timetable Maker</h3>
                 <p>Custom study schedules</p>
                 <div class="access-now">
                     <span>Access Now</span>
                     <i class="fas fa-arrow-right"></i>
                 </div>
             </a>

             <a class="feature-card" href="features/attendance/attendance.html?sidebar=active">
                 <div class="feature-icon">
                     <i class="fas fa-calculator"></i>
                 </div>
                 <h3>Attendance Calculator</h3>
                 <p>Track and predict your attendance for all classes</p>
                 <div class="access-now">
                     <span>Access Now</span>
                     <i class="fas fa-arrow-right"></i>
                 </div>
             </a>
             <!-- Repeat for other 7 features with unique icons -->
             <a class="feature-card" href="features/mess-menu/mess.html?sidebar=active">
                 <div class="feature-icon">
                     <i class="fas fa-file-alt"></i>
                 </div>
                 <h3>Mess Menus</h3>
                 <p>Official menus of all messes and canteens</p>
                 <div class="access-now">
                     <span>Access Now</span>
                     <i class="fas fa-arrow-right"></i>
                 </div>
             </a>
             <a class="feature-card" href="features/gpa-calculator/cgpa.html?sidebar=active">
                 <div class="feature-icon">
                     <i class="fas fa-calculator"></i>
                 </div>
                 <h3>CGPA Calculator</h3>
                 <p>Track and predict your GPA </p>
                 <div class="access-now">
                     <span>Access Now</span>
                     <i class="fas fa-arrow-right"></i>
                 </div>
             </a>

             <a class="feature-card" href="features/faculty/faculty.html?sidebar=active">
                 <div class="feature-icon">
                 <i class="fas fa-chalkboard-teacher"></i>
                 </div>
                 <h3>Faculty Info</h3>
                 <p>All Faculty details of vit bhopal</p>
                 <div class="access-now">
                     <span>Access Now</span>
                     <i class="fas fa-arrow-right"></i>
                 </div>
             </a>

             <a class="feature-card" href="features/event/event.html?sidebar=active">
                 <div class="feature-icon">
                     <i class="fas fa-video"></i>
                 </div>
                 <h3>Events</h3>
                 <p>All the events status</p>
                 <div class="access-now">
                     <span>Access Now</span>
                     <i class="fas fa-arrow-right"></i>
                 </div>
             </a>


             <a class="feature-card" href="features/marketplace/market.html?sidebar=active">
                 <div class="feature-icon">
                     <i class="fas fa-pencil-alt"></i>
                 </div>
                 <h3>Handwritten Notes</h3>
                 <p>Curated notes from top-performing students</p>
                 <div class="access-now">
                     <span>Access Now</span>
                     <i class="fas fa-arrow-right"></i>
                 </div>
             </a>
        </div>
    </div>
</section>            </div>
        </div>
    </section>

    <!-- Why Join Section (Full Width) -->
<section class="why-join" id="why-join">
    <div class="container">
        <div class="section-title centered">
            <h2>Why Join Scholars Stack?</h2>
            <p>Premium benefits for academic excellence at VIT Bhopal</p>
        </div>
        
        <div class="benefits-container">
            <div class="benefit-row">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <h3>Elite Materials</h3>
                    <p>Study resources from 9-pointer students</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Curated Resources</h3>
                    <p>Perfectly organized for every course</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h3>Smart Calculators</h3>
                    <p>CGPA and attendance trackers</p>
                </div>
            </div>
            
            <div class="benefit-row">
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <h3>Personalized Guidance</h3>
                    <p>Study recommendations tailored for you</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3>Priority Support</h3>
                    <p>Direct help from top students</p>
                </div>
                <div class="benefit-card">
                    <div class="benefit-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Exam Strategies</h3>
                    <p>Proven techniques for better scores</p>
                </div>
            </div>
            
            <div class="benefit-cta">
                <h3>Join hundreds of VITB students achieving academic excellence</h3>
                <p>Average GPA increase: 1.2 points within first semester</p>
                <a href="https://chat.whatsapp.com/GBLnFekrdLGCfW2Vc4MnUc?mode=ac_c" class="btn btn-primary1">
                    <i class="fas fa-rocket"></i> Join Elite Students
                </a>
            </div>
        </div>
    </div>
</section>


    <!-- Testimonials -->
    <section id="testimonials" class="testimonials">
        <div class="container">
            <div class="section-title">
                <h2>Student Success Stories</h2>
                <p>Hear from VITB students who transformed their academic journey</p>
            </div>
            <div class="testimonial-grid">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>Honestly, I was drowning in notes and random YouTube videos before this. Your curated stuff saved me SO much time – finally found explanations that actually made sense! The timetable feature? Lifesaver. Went from barely passing to an A- in organic chem. Can't believe I waited this long.</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-info">
                            <h4>Parth Patel</h4>
                            <p>CSE 3rd Year | GPA: 9.16</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>I was skeptical about 'bought notes' but wow. These aren't just summaries – they're structured like a tutor planned them. Paired with the timetable tool? Finally stopped cramming. Went from B's to straight A's this semester. Seriously, if you're struggling to organize, just try it.</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-info">
                            <h4>Priyanshu Sharma</h4>
                            <p>AI 2nd Year | GPA: 8.89</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        <p>Dude, the fluid dynamics notes + linked videos? Spot on. Explained concepts my prof couldn't. But the attendance calculator was low-key genius – took so much stress off my shoulders. Actually had time to breathe between labs. 10/10 would recommend for any overloaded eng student.</p>
                    </div>
                    <div class="testimonial-author">
                        <div class="author-info">
                            <h4>Sonu Pastagia</h4>
                            <p>CSE 3th Year | GPA: 9.23</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta">
        <div class="container">
            <div class="cta-content">
                <h2>Ready to Transform Your Academic Journey?</h2>
                <p>Join hundreds of VITB students who are using our premium resources to maximize their academic performance and achieve their GPA goals.</p>
                <a href="features/marketplace/market.html?sidebar=active" class="btn btn-primary btn-light">
                    <i class="fas fa-rocket"></i> Get Started Now
                </a>
                <p class="cta-note" style="margin-top: 20px; font-size: 0.9rem;">Average GPA increase: 1.2 points within first semester</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Scholars Stack</h3>
                    <p>Providing premium academic resources curated by top-performing students to help you excel in your courses.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Marketplace</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> My Courses</a></li>
                        <li><a href="features/gpa-calculator/cgpa.html?sidebar=active"><i class="fas fa-chevron-right"></i> CGPA Calculator</a></li>
                        <li><a href="features/marketplace/market.html?sidebar=active"><i class="fas fa-chevron-right"></i> Marketplace</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Handwritten Notes</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Teacher's Materials</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Previous Year Papers</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Video Resources</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Timetable Maker</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> vitbsmashers@gmail.com</li>
                        <li><i class="fas fa-phone"></i> +91 7984182948</li>
                        <li><i class="fas fa-map-marker-alt"></i> VIT Bhopal Campus</li>
                        <li>Bhopal-Indore Highway</li>
                        <li>Madhya Pradesh</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Scholars Stack. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // API Configuration - Point to backend server
        const API_BASE = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:4000/api/v1/auth'
            : 'https://vitbsmashers.onrender.com/api/v1/auth';

        // Google Sign-In implementation with both inner and outer button support
        function initGoogleSignIn() {
            console.log('🚀 Initializing Google Sign-In...');

            // Initialize Google Identity Services
            google.accounts.id.initialize({
                client_id: '686446558105-bl2q9t63tcnei5u4ugck952tanccrpdu.apps.googleusercontent.com',
                callback: handleGoogleSignIn,
                auto_select: false,
                cancel_on_tap_outside: true
            });

            // Render the Google Sign-In button (creates inner button)
            google.accounts.id.renderButton(
                document.getElementById('googleSignInContainer'),
                {
                    theme: 'filled_blue',
                    size: 'large',
                    text: 'signin_with',
                    shape: 'rectangular',
                    logo_alignment: 'left',
                    width: '300'
                }
            );

            // Proper site integration for Google button
            setTimeout(() => {
                const container = document.getElementById('googleSignInContainer');
                if (container) {
                    // Remove any duplicate Google buttons
                    const allGoogleButtons = container.querySelectorAll('[role="button"], .google-signin-btn, [data-google-button]');
                    if (allGoogleButtons.length > 1) {
                        console.log('🧹 Removing duplicate Google buttons...');
                        // Keep only the first button, remove others
                        for (let i = 1; i < allGoogleButtons.length; i++) {
                            allGoogleButtons[i].remove();
                        }
                    }

                    const googleButton = container.querySelector('[role="button"]');
                    if (googleButton) {
                        // Essential styles for seamless integration
                        googleButton.style.cssText = `
                            border-radius: 50px !important;
                            font-family: 'Poppins', sans-serif !important;
                            font-weight: 600 !important;
                            font-size: 1rem !important;
                            min-height: 52px !important;
                            max-width: 100% !important;
                            box-shadow: 0 4px 20px rgba(66, 133, 244, 0.3) !important;
                            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
                            display: flex !important;
                            align-items: center !important;
                            justify-content: center !important;
                            margin: 0 auto !important;
                        `;

                        // Ensure Google branding remains intact
                        const icon = googleButton.querySelector('svg');
                        if (icon) {
                            icon.style.filter = 'none !important';
                            icon.style.width = '20px !important';
                            icon.style.height = '20px !important';
                        }

                        const text = googleButton.querySelector('span');
                        if (text) {
                            text.style.color = 'white !important';
                            text.style.fontSize = '1rem !important';
                        }

                        // Add class for CSS hover effects
                        googleButton.classList.add('google-signin-btn');

                        // Override the default click behavior to force account selection
                        googleButton.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();

                            // Create a custom OAuth URL that forces account selection
                            const clientId = '686446558105-bl2q9t63tcnei5u4ugck952tanccrpdu.apps.googleusercontent.com';
                            const redirectUri = encodeURIComponent('https://vitbsmashers.onrender.com/api/v1/auth/google/callback');
                            const scope = encodeURIComponent('openid email profile');
                            const state = encodeURIComponent('force_select_account');

                            const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?` +
                                `client_id=${clientId}&` +
                                `redirect_uri=${redirectUri}&` +
                                `scope=${scope}&` +
                                `response_type=code&` +
                                `access_type=offline&` +
                                `prompt=select_account`;

                            console.log('🔗 Redirecting to OAuth URL with account selection:', authUrl);
                            window.location.href = authUrl;
                        });

                        console.log('✅ Google Sign-In button properly integrated with account selection');
                    }
                }
            }, 600);

        }

        function handleGoogleSignIn(response) {
            console.log('📨 Google sign-in response received');

            if (!response.credential) {
                console.error('❌ No credential received');
                showToast('Google sign-in failed. Please try again.', 'error');
                return;
            }

            // Decode JWT to get email for validation
            try {
                const payload = JSON.parse(atob(response.credential.split('.')[1]));
                const email = payload.email;

                if (!email || !email.endsWith('@vitbhopal.ac.in')) {
                    console.error('❌ Non-VIT email detected:', email);
                    showToast('Please use your VIT Bhopal University email (@vitbhopal.ac.in) to sign in.', 'error');
                    return;
                }

                console.log('✅ VIT email verified:', email);
            } catch (error) {
                console.error('❌ Error decoding JWT:', error);
                showToast('Authentication failed. Please try again.', 'error');
                return;
            }

            console.log('✅ ID token received, sending to backend...');
            showToast('Signing you in...', 'info');

            // Send ID token to backend
            fetch(`${API_BASE}/google-token`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ idToken: response.credential })
            })
            .then(res => {
                if (!res.ok) {
                    throw new Error(`HTTP ${res.status}: ${res.statusText}`);
                }
                return res.json();
            })
            .then(data => {
                console.log('✅ Backend response:', data);

                if (!data.token) {
                    throw new Error(data.message || 'Authentication failed');
                }

                // Success - User is now logged in
                localStorage.setItem('token', data.token);
                if (data.data && data.data.user) {
                    localStorage.setItem('userProfile', JSON.stringify(data.data.user));
                }
                showToast('Welcome! Taking you to your profile...', 'success');

                setTimeout(() => {
                    window.location.href = 'features/profile/profile.html?sidebar=active';
                }, 1500);
            })
            .catch(err => {
                console.error('❌ Authentication error:', err);
                let errorMessage = 'Authentication failed. Please try again.';

                if (err.message.includes('VIT Bhopal')) {
                    errorMessage = err.message;
                } else if (err.message.includes('network') || err.message.includes('fetch')) {
                    errorMessage = 'Unable to connect to server. Please check your internet connection.';
                }

                showToast(errorMessage, 'error');
            });
        }

        function showToast(message, type = 'info') {
            // Remove existing toasts
            const existingToasts = document.querySelectorAll('.auth-toast');
            existingToasts.forEach(toast => toast.remove());

            // Create new toast
            const toast = document.createElement('div');
            toast.className = `auth-toast ${type}`;
            toast.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;

            document.body.appendChild(toast);

            // Show toast
            setTimeout(() => {
                toast.classList.add('show');
            }, 100);

            // Auto-hide after 4 seconds
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 4000);
        }


        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🚀 DOM loaded, initializing Google Sign-In...');

            // Check if Google API is already loaded
            if (window.google && window.google.accounts && window.google.accounts.id) {
                console.log('✅ Google API available, initializing...');
                initGoogleSignIn();
            } else {
                // Wait for Google API to load
                window.addEventListener('load', () => {
                    if (window.google && window.google.accounts && window.google.accounts.id) {
                        console.log('✅ Google API loaded, initializing...');
                        initGoogleSignIn();
                    } else {
                        console.error('❌ Google API failed to load');
                        showToast('Google sign-in failed to load. Please refresh the page.', 'error');
                    }
                });
            }
        });
    </script>
    <script src="script.js"></script>
</body>
</html>